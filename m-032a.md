---
id: m-032a
status: closed
deps: []
created: 2026-02-10T04:35:13Z
type: bug
priority: 0
assignee: Adam Avenir
updated: 2026-02-12T14:52:27Z
---
# Grammar: args+cwd combo syntax for sh/cmd blocks

sh(@var):/path { } and cmd(@var):/path { } don't work because grammar parses workingDir before argList, so sh:/path(@var) eats the parens as part of the path.

Fix: Reorder grammar to language argList? workingDir? so sh(@var):/tmp { } works.

Current grammar order (code.peggy RunLanguageCodeWithArgs):
  language workingDir? argList? code

Should be:
  language argList? workingDir? code

Also:
- Update the cmd->sh shell operator error messages to mention parameter passing (the sh(@var) { echo "$var" } pattern)
- Update docs for both cmd and sh to show the combined args+cwd pattern: sh(@var):/path { ... }
- Verify cmd(@var):/path { } works too after the fix

