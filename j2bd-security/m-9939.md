---
id: m-9939
status: closed
deps: []
created: 2026-02-04T22:26:03Z
type: task
priority: 2
assignee: Adam
tags: [phase-3, verification]
updated: 2026-02-04T22:35:12Z
---
# Phase 3: Verify security protections demo

Run the protection-demo.mld file end-to-end and verify all 4 protections work:

1. **Secret protection** - Attempt to call @sendToServer(@apiKey) should be blocked by policy
2. **MCP data restriction** - Attempt to call @deleteFiles(@mcpData.path) should be blocked
3. **PII redaction** - Showing @userData should display redacted output
4. **Clear errors** - Blocked operations should show descriptive error messages

**Critical verification point**: Protection 2 uses literal data (`/var @mcpData = {...}`). This data won't have `src:mcp` provenance since it's a literal, not from MCP. Verify whether the policy rule actually fires. If it doesn't, we need to either:
- Find a way to test with real MCP data
- Add a test annotation to apply source labels
- Document this as a known limitation

**How to verify**:
```bash
npm run build && mlld run docs/src/atoms/security/examples/protection-demo.mld
```

Capture output and verify each protection. If any don't work, report specific gaps.

