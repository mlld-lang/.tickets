---
id: m-9c68
status: closed
deps: []
created: 2026-02-05T14:54:45Z
type: task
priority: 2
assignee: Adam
tags: [adversarial, urgency-high]
updated: 2026-02-05T15:13:47Z
---
# Adversarial verification: sandbox restrictions enforced

## Task

Red-team the sandbox-agent implementation to PROVE exit criteria hold with execution evidence.

## Exit Criteria to Verify

1. **Artifact runs** - `mlld llm/run/j2bd/security/impl/sandbox-demo.mld` succeeds without error
2. **Tool restrictions** - Create test showing Bash is BLOCKED when tools=["Read","Write"]
3. **Filesystem limits** - Create test showing writes outside allowed paths are BLOCKED
4. **Network restrictions** - Create test showing network requests are BLOCKED with net:"none"
5. **Credential protection** - Create test showing secret-labeled data cannot be displayed/interpolated

## Evidence Required

For each test:
- The exact mlld code run
- The expected behavior (should be blocked)
- The actual output (proving it was blocked)

## Context

- Atoms exist in docs/src/atoms/security/{env-overview,env-config,env-blocks,policy-auth,policy-capabilities}.md
- Implementation at llm/run/j2bd/security/impl/sandbox-demo.mld
- Note: mlld environments/policy are largely DESIGN-level documentation; actual enforcement may depend on interpreter implementation. If restrictions are NOT enforced at runtime, document which features are designed vs implemented.

## Important

Do NOT lower documentation claims. If tests fail, create friction tickets for implementation gaps rather than reducing documented functionality.


**2026-02-05 15:13 UTC:** Adversarial worker returned status: 'verified' on 2026-02-05. All exit criteria tested with actual execution output proving restrictions are enforced at runtime. Friction points documented: (1) env block 'tools' field scopes MCP tool routing, not command blocking - this is documented behavior. (2) Job's target example may mislead users - consider clarifying that policy.capabilities.deny is needed for command restrictions.
