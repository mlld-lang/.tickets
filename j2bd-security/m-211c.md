---
id: m-211c
status: closed
deps: []
created: 2026-02-05T18:18:17Z
type: task
priority: 2
assignee: Adam
tags: [urgency-high, phase-2]
updated: 2026-02-05T18:22:41Z
---
# Add @ensureVerified enforcement guard to main.mld

The exit criteria EXPLICITLY requires an enforcement guard that blocks if the auditor doesn't call verify tool:

```mlld
guard @ensureVerified after llm = when [
  @mx.tools.calls.includes("verify") => allow
  * => retry "Must verify signed instructions before proceeding"
]
```

**Current state:**
- main.mld at llm/run/j2bd/security/impl/main.mld has the full audit pattern BUT is missing this guard
- The job spec says: 'autoverify injects instructions but doesn't enforce - this guard does'

**Requirement:**
- Add the @ensureVerified guard to main.mld
- Note: @mx.tools.calls requires MCP context per tool-call-tracking.md atom
- If MCP context isn't available in the demo, add a comment explaining the limitation
- The guard syntax is valid even if @mx.tools.calls is empty outside MCP context

**Acceptance criteria:**
- Guard added to main.mld
- mlld validate passes
- mlld runs without error (guard may not fire without MCP but syntax must be valid)

