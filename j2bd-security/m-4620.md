---
id: m-4620
status: closed
deps: []
created: 2026-02-09T12:43:44Z
type: task
priority: 2
assignee: Adam Avenir
tags: [phase-5, excellence, high-polish]
updated: 2026-02-09T12:45:15Z
---
# Excellence assessment: defaults-rules end-to-end UX

## Excellence Assessment: Defaults-Rules Two-Step Pattern

Evaluate the end-to-end user experience of the defaults-rules two-step pattern feature.

### What to Assess

1. **Getting Started Experience**: Would a new user succeed with this feature based on documentation alone?
   - Read the atoms: policies.md, policy-operations.md, labels-sensitivity.md, labels-trust.md, policy-label-flow.md
   - Try to follow them as a new user would
   - Are the examples clear and self-contained?

2. **Implementation Artifact**: Run `mlld llm/run/j2bd/security/impl/defaults-rules.mld`
   - Is the output clear and educational?
   - Does it demonstrate the feature well?
   - Would a user understand what happened and why?

3. **Error Messages**: Test error cases
   - Are error messages helpful? Do they guide users to solutions?
   - Do they include enough context (rule names, label names, operation names)?

4. **Common Mistakes**: Consider what a new user might get wrong
   - Forgetting to add operations mapping (rules fire on direct labels but not semantic labels)
   - Forgetting to enable rules in defaults.rules
   - Confusing semantic labels with risk categories
   - Are these mistakes caught with helpful feedback?

5. **Documentation Consistency**: Do all 5 atoms tell a coherent story?
   - Cross-references point to real atoms?
   - Terminology is consistent?
   - The two-step pattern is explained the same way everywhere?

### Known Non-Blocking Observations
- denied => handler pattern is in the artifact but not in standalone doc atoms
- Primitive number/boolean values lose taint in reattachSecurityDescriptor (theoretical only)
- String concat (+) NaN behavior strips taint but destroys data (by design)

### Starting Commit
57b035f1d (before this job's changes)

### Commits in This Job
- d0c077bd4: Update security atoms to emphasize two-step pattern
- 59844d072: Enable two-step pattern: operations mapping in guards + denied handler for policy errors
- ef0300f1a: Fix taint propagation through when-expressions and for-loops


**2026-02-09 12:45 UTC:** Closing as duplicate. m-f5d0 covers the same scope and was created in this run's decision flow.
