---
id: m-0c26
status: open
deps: [m-978e]
created: 2026-02-18T17:12:20Z
type: task
priority: 2
assignee: Adam Avenir
updated: 2026-02-18T17:12:20Z
---
# Phase 3: Implement fileDiff and inspection API compatibility

Context:
- Source plan: plan-virtualfs.md (Phase 3)

Goal:
Implement fileDiff() and finalize inspection naming compatibility (changes vs diff alias).

Implementation tasks:
- Add fileDiff(path) unified diff output in VirtualFS.
- Choose diff engine implementation and keep output deterministic.
- Finalize API compatibility decision:
  - canonical method,
  - alias/deprecation behavior if applicable.
- Normalize newline behavior to avoid platform-specific diff churn.

## Design

Integration anchors:
- services/fs/VirtualFS.ts
- public docs/examples in vision/spec alignment

Quality requirements:
- Diff output must be stable for CI snapshots.
- Alias behavior (if any) must be explicit and tested.

## Acceptance Criteria

Exit criteria:
- Added test coverage:
  - Add services/fs/VirtualFS.diff.test.ts for created/modified/deleted/unchanged scenarios.
  - Add compatibility tests for changes()/diff() contract.
- All tests pass:
  - full regression gate.
- Docs updates:
  - Update CHANGELOG.md and docs text to reflect final inspection API naming.
- Commit made:
  - Commit with message: feat(vfs): add fileDiff and finalize inspection API naming

