---
id: m-8467
status: closed
deps: []
created: 2026-02-09T08:41:30Z
type: bug
priority: 2
assignee: Adam Avenir
updated: 2026-02-09T22:43:34Z
---
# Guard import/export: guard not recognized as export during import

tests/cases/feat/security/guard-import-export: Module strict-mode syntax fixed, but guard defined via 'guard @name' isn't found by export { @name } during import resolution. MlldImportError: Import 'moduleSecretShield' not found.


**2026-02-09 22:43 UTC:** Fixed selected guard imports end-to-end. Root causes: (1) import validation/binding only checked moduleObject keys while guard exports are carried in guardDefinitions; (2) virtual-FS module parsing forced markdown mode, so strict-syntax .mld guard/export modules could parse as text. Changes: ImportDirectiveEvaluator.validateExportBindings now includes guardDefinitions names; VariableImporter.handleSelectedImport now treats selected guard names as valid imports without requiring variable bindings; ModuleContentProcessor now retries strict parsing for virtual .mld imports when markdown parse yields only text nodes and strict parse finds directives. Removed skip for feat/security/guard-import-export. Verified with npx vitest run interpreter/interpreter.fixture.test.ts -t 'feat/security/guard-import-export' plus import guard tests.
