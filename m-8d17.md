---
id: m-8d17
status: open
deps: [m-1e84]
created: 2026-02-20T20:33:13Z
type: task
priority: 1
assignee: Adam
updated: 2026-02-20T20:33:18Z
---
# Add fixture tests for label preservation through js/py/sh/cmd code blocks

Label preservation through code blocks works correctly but has zero fixture test coverage. Need tests for:

1. js block round-trip: pii input -> js { return val } -> pii preserved on output
2. sh block round-trip: pii input -> sh { echo "$val" } -> pii preserved on output  
3. py block round-trip: pii input -> py { print(val) } -> pii preserved on output
4. cmd block round-trip: pii input -> cmd { printf "%s" "@val" } -> pii preserved on output
5. js block with transformation: pii input -> js { return val.toUpperCase() } -> pii still on output
6. Multi-label merge: secret + pii inputs through code block -> both labels on output

All of these pass today. Tests are to lock in the behavior.

