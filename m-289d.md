---
id: m-289d
status: closed
deps: []
created: 2026-02-03T05:58:42Z
type: bug
priority: 0
assignee: Adam
tags: [security, env-directive, phase-3]
updated: 2026-02-12T13:38:16Z
---
# MCP restrictions not enforced in env blocks

The env directive allows setting mcps: [] to disable MCP servers, but this is NOT enforced at runtime.

Evidence:
- env.ts stores the mcps config via setScopedEnvironmentConfig()
- No code anywhere checks the mcps setting before allowing MCP tool calls
- The MCP filtering described in the spec does not exist in the codebase

Impact: Security configuration is syntax-only; env MCP restrictions provide no actual security.

