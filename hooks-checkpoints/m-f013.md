---
id: m-f013
status: open
deps: [m-ee16]
created: 2026-02-18T17:09:31Z
type: task
priority: 0
assignee: Adam Avenir
updated: 2026-02-18T17:09:40Z
---
# Phase 6A: Checkpoint protocol adapter + inert hook wiring

Implement Phase 6A protocol adapter + no-op checkpoint hook wiring.

Scope:
- Add checkpoint pre/post hook files and register them in correct built-in hook order.
- Implement chosen protocol via compatibility adapter (metadata or fulfill mapping).
- Keep behavior unchanged in this sub-phase (no execution short-circuit yet).

## Design

High-sensitivity files:
- `interpreter/hooks/HookManager.ts`
- `interpreter/hooks/hook-decision-handler.ts`
- checkpoint hook modules + environment registration

Goal is protocol safety and backward compatibility before activation.

## Acceptance Criteria

Exit criteria:
- Added test coverage:
  - adapter behavior tests
  - guard decision compatibility tests (`continue|abort|retry|deny`)
- All tests pass:
  - `npm test tests/interpreter/checkpoint/ tests/interpreter/hooks/ tests/interpreter/guards/`
  - `npm run build`
  - `npm test`
- Docs updates complete:
  - `docs/dev/HOOKS.md` protocol note
- Commit made after green tests:
  - `refactor(checkpoint): add checkpoint decision adapter before cache-hit execution short-circuit`

