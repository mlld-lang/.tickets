---
id: m-57c7
status: open
deps: [m-5bdc]
created: 2026-02-18T17:09:31Z
type: task
priority: 0
assignee: Adam Avenir
updated: 2026-02-18T17:09:39Z
---
# Phase 3C: Hook non-reentrancy boundary hardening

Implement Phase 3C non-reentrancy boundary hardening.

Scope:
- Add hook suppression context so nested operations triggered by hooks do not trigger hooks again.
- Preserve nested guard execution for operations triggered by hooks.
- Preserve existing guard suppression during guard evaluation.

## Design

Implement explicit suppression matrix behavior and pin it with tests:
- normal execution
- inside hook
- inside guard

## Acceptance Criteria

Exit criteria:
- Added test coverage:
  - nested hook calls do not recurse
  - nested operations from hooks still run guards
  - existing guard-suppression semantics remain intact
- All tests pass:
  - `npm test tests/interpreter/hooks/ tests/interpreter/guards/`
  - `npm run build`
  - `npm test`
- Docs updates complete:
  - `docs/dev/HOOKS.md` suppression matrix
- Commit made after green tests:
  - `fix(hooks): enforce hook non-reentrancy while preserving nested guard execution`

