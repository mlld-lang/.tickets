---
id: m-7e91
status: closed
deps: []
created: 2026-02-24T19:57:46Z
type: feature
priority: 0
assignee: Adam Avenir
updated: 2026-02-24T20:13:09Z
---
# Pre-scan checkpoint names from source for --resume

When a script fails mid-way through execution, `--resume "checkpoint-name"` only works if the checkpoint was registered during a previous run. This means you can't resume from a checkpoint the script never reached.

The fix: pre-scan the script source for all `checkpoint` directives before execution and register them by source order. This makes all checkpoints available to `--resume` immediately, even on a first run or after a mid-run failure.

**Context**: Discovered during QA orchestrator dogfooding. A run failed during phase 3 (trends), but `--resume "trends"` couldn't work because only `checkpoint "triage"` had been registered before the failure.

**Current behavior**: Checkpoints are registered at runtime when the `checkpoint` directive is evaluated. `--resume` can only target checkpoints the CheckpointManager has seen.

**Desired behavior**: All checkpoint names declared in the script are known before execution begins. `--resume "trends"` works even if the script never reached that point.

## Acceptance Criteria

1. `mlld run script --resume "name"` works for any checkpoint declared in the script, regardless of prior execution history
2. Source order determines checkpoint ordering (same as runtime registration order would be)
3. No change to runtime checkpoint behavior â€” pre-scan is additive

