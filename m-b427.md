---
id: m-b427
status: closed
deps: []
links: []
created: 2026-01-24T23:08:04Z
type: task
priority: 2
assignee: Adam Avenir
parent: m-2af3
---
# McpImportManager lacks lifecycle controls (idle timeout, max concurrent)

## Problem

McpImportManager only enforces startup timeout. It lacks idle timeout and max concurrent controls that MCPOrchestrator has.

**MCPOrchestrator defaults (line 677-681):**
```typescript
const DEFAULT_LIFECYCLE: McpLifecycleConfig = {
  startupTimeoutMs: 10_000,
  idleTimeoutMs: 60_000,
  maxConcurrent: 5
};
```

**McpImportManager (line 46):**
```typescript
const STARTUP_TIMEOUT_MS = 10_000;
// No idle timeout, no max concurrent
```

This can leak processes in long sessions or repeated imports.

## Scope

1. Add idle timeout to McpImportManager (servers shut down after period of inactivity)
2. Consider max concurrent limit (less critical since imports are explicit)
3. Document the difference between orchestrator and import manager lifecycle if intentional

## Files
- interpreter/mcp/McpImportManager.ts:45-91

## Tests Needed
- Server shuts down after idle timeout
- Server restarts on next call after idle shutdown

