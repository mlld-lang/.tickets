---
id: m-0c82
status: open
deps: [m-5eb7]
created: 2026-02-18T17:16:46Z
type: epic
priority: 1
assignee: Adam Avenir
updated: 2026-02-18T17:18:25Z
---
# Phase 3: Browser filesystem and resolver wiring

## Goal
Complete browser-compatible filesystem and import-resolution wiring for virtual/in-memory execution.

## Context and references
- Planning source: `plan-in-browser.md` (Phase 3).
- Architecture/testing references: `docs/dev/ARCHITECTURE.md`, `docs/dev/TESTS.md`.
- Primary integration targets:
  - `services/fs/*` (including virtual FS implementation)
  - `interpreter/env/ImportResolver.ts`
  - `core/resolvers/*` (resolver registration/composition)
  - `interpreter/eval/import/ModuleContentProcessor.ts`

## Required implementation
1. Implement browser runtime virtual filesystem (`VirtualFS` or equivalent) satisfying `IFileSystemService`.
2. Ensure browser runtime path handling uses browser-safe path service and never Node FS/path APIs.
3. Make browser resolver registration explicit; no accidental Node-coupled resolver inclusion.
4. Preserve URL import and dynamic module behavior in browser profile.

## Required test coverage
1. Add virtual filesystem unit tests covering read/write/exists/readdir/stat/mkdir/rm/unlink semantics.
2. Add browser import profile integration tests for:
   - relative and absolute virtual path resolution
   - URL import fetch path
   - dynamic module import in browser profile
3. Add fixture coverage in `tests/cases/integration/browser/` for representative import flows.
4. Run all touched suites and verify pass status.

## Required docs and changelog updates
1. Update `docs/dev/TESTS.md` with browser fixture conventions and execution notes.
2. Update relevant docs for browser virtual FS behavior and import semantics.
3. Update `CHANGELOG.md` with Added entries for browser virtual FS and import behavior.

## Commit requirement
- Commit only after tests are green.
- Commit message must be:
  - `feat(browser): wire virtual fs and browser-safe import resolution`

## Exit criteria
1. Browser virtual FS and resolver wiring are complete and browser-safe.
2. New and updated tests are present and passing.
3. Browser profile does not hit Node filesystem/path APIs.
4. Required docs and `CHANGELOG.md` updates are completed.
5. Required phase commit exists and references the completed test run.
