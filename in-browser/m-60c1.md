---
id: m-60c1
status: open
deps: [m-4210]
created: 2026-02-18T17:16:46Z
type: epic
priority: 1
assignee: Adam Avenir
updated: 2026-02-18T17:18:25Z
---
# Phase 6: Browser end-to-end tests and CI integration

## Goal
Add durable browser end-to-end coverage and enforce it in CI so browser runtime regressions are caught automatically.

## Context and references
- Planning source: `plan-in-browser.md` (Phase 6).
- Testing guidance: `docs/dev/TESTS.md`.
- Primary integration targets:
  - `vitest.config.browser.mts` (new) or equivalent
  - `package.json` test scripts
  - `.github/workflows/*`
  - `tests/browser/*`
  - `tests/cases/integration/browser/*`

## Required implementation
1. Add dedicated browser test command (`npm run test:browser`) and config.
2. Add at least one real browser-context smoke suite against bundled output (not only Node/jsdom).
3. Wire browser suite into CI matrix and ensure deterministic behavior in CI.
4. Keep fixture conventions aligned to `docs/dev/TESTS.md`.

## Required test coverage
1. Cover these minimum scenarios in automated browser suites:
   - bundle boot + `createRuntime` smoke path
   - virtual FS read/write/list via public API
   - `exe js` success path
   - `exe bash/node/python` denial path with exact error class checks
   - URL import path (mocked fetch) and module-cache reuse behavior
2. Ensure suite is stable locally and in CI.
3. Run all touched suites and verify pass status.

## Required docs and changelog updates
1. Update `docs/dev/TESTS.md` with browser suite commands and troubleshooting.
2. Update `CHANGELOG.md` with Added entry for browser e2e matrix.

## Commit requirement
- Commit only after tests are green.
- Commit message must be:
  - `test(browser): add browser e2e suite and ci integration`

## Exit criteria
1. Browser e2e suite exists, runs locally, and is connected in CI.
2. Minimum scenario coverage is implemented and passing.
3. Required docs and `CHANGELOG.md` updates are completed.
4. Required phase commit exists and references the completed test run.
