---
id: m-4210
status: open
deps: [m-a3c9]
created: 2026-02-18T17:16:46Z
type: epic
priority: 1
assignee: Adam Avenir
updated: 2026-02-18T17:18:25Z
---
# Phase 5: Build packaging and publishing pipeline unification

## Goal
Produce browser-targeted artifacts and unify package/release flow around the single `mlld` CLI/package surface.

## Context and references
- Planning source: `plan-in-browser.md` (Phase 5).
- Primary integration targets:
  - `tsup.config.ts`
  - `package.json`
  - `scripts/build-incremental.js`
  - `bin/mlldx-wrapper.cjs` (remove)
  - `mlldx-package/*` (remove)
  - `scripts/sync-mlldx.cjs` and `scripts/publish-with-mlldx.cjs` (remove or stop depending on them)

## Required implementation
1. Add browser build target in `tsup.config.ts` for browser runtime entry.
2. Update exports/package metadata for browser artifact consumption.
3. Remove or decommission `mlldx` wrapper/package release path.
4. Update release/build scripts so incremental and publish checks validate the unified artifact set.
5. Confirm browser dist path does not include Node built-ins.

## Required test coverage
1. Add packaging tests to validate:
   - export map correctness
   - expected files in packed tarball
   - browser dist import smoke behavior
2. Add/update CI script tests to cover unified publish/build flows after legacy script removal.
3. Run `npm run build` and all touched test suites; verify pass status.

## Required docs and changelog updates
1. Update install and packaging docs in:
   - `README.md`
   - `docs/user/sdk.md`
   - `docs/user/cli.md`
2. Update `CHANGELOG.md` with Changed entries for packaging and release pipeline unification.

## Commit requirement
- Commit only after tests are green.
- Commit message must be:
  - `build(cli-browser): add browser bundle target and unify packaging pipeline`

## Exit criteria
1. Browser artifacts are generated reproducibly via standard build commands.
2. Packaging/export tests are present and passing.
3. Unified release/build scripts no longer depend on separate `mlldx` package flow.
4. Required docs and `CHANGELOG.md` updates are completed.
5. Required phase commit exists and references the completed test run.
