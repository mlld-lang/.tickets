---
id: m-020e
status: open
deps: [m-12ed]
created: 2026-02-12T18:24:41Z
type: bug
priority: 0
assignee: Adam
tags: [validate, dx, ergonomics]
updated: 2026-02-12T18:25:05Z
---
# for...when with static condition: add validate warning

When a for...when condition does not reference the iteration variable, it is almost always a mistake — the user wants to conditionally skip the entire loop, not filter each item with the same static result.

Example: var @results = for parallel(8) @item in @list when @shouldRun [...] — the when clause is a per-item filter, so every iteration evaluates the same condition. This is wasteful and confusing. The correct pattern is to pre-filter: var @items = @shouldRun ? @list : [].

mlld validate should emit a warning when: (1) A for...when condition does not reference the iteration variable, (2) The condition only references outer-scope variables. The warning should suggest the pre-filter pattern.

Related: m-12ed (improve runtime error message for this case). This ticket is about catching it earlier via validate.

