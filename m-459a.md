---
id: m-459a
status: open
deps: [m-dabe, m-6b97]
created: 2026-02-10T19:52:25Z
type: task
priority: P0
assignee: Adam
updated: 2026-02-10T19:53:09Z
---
# Wrap cmd/sh output as StructuredValue

cmd/sh output that returns JSON currently becomes a plain parsed object — no .text, no .data, no .mx. This violates DATA.md's 'everything at runtime is StructuredValue' principle.

Should be:
  {type: 'object', text: '{"status":"ok"}', data: {status: 'ok'}, mx: {source: 'cmd', ...}}

- .text = raw stdout string
- .data = auto-parsed JSON (when detected), or raw string when not JSON
- .mx = execution metadata (source, command, exit code, duration)

This plus m-dabe (JS exe unwrap) and m-6b97 (for-parallel yield unwrap) completes the consistency story: every value is StructuredValue, every consumption boundary auto-resolves to the right view, users never think about wrappers.

Side effect: | @parse becomes niche — only needed when auto-detection didn't fire or you want to force-parse. The common case (cmd returns JSON, file loads JSON) just works through .data and field access.

Related: m-dabe (StructuredValue leaks into JS exe), m-6b97 (for-parallel nested yield unwrap), docs/dev/DATA.md

