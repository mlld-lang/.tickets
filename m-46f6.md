---
id: m-46f6
status: closed
deps: [m-434a]
links: []
created: 2026-02-06T21:42:57Z
type: chore
priority: 0
assignee: Adam Avenir
tags: [when, exe, dx, docs]
updated: 2026-02-12T15:21:51Z
---
# Warn or document: bare when value in exe block is discarded

## Context

Related to m-434a (WhenExpression values silently discarded in exe blocks).

Even after fixing the runtime behavior, this pattern is confusing:

```mlld
exe @guard(x) = [
  when !@x => "missing"    >> does this return? depends on fix
  => "ok: @x"
]
```

Whether or not we fix when-expression-as-return, the docs and error messages should clearly document the return semantics:

1. **howto/atoms**: The when-blocks and when-value-returning atoms should note that inside exe blocks, only explicit `=> value` returns from the exe. A bare when expression value may not behave as expected.

2. **Error patterns**: Consider a warning (not error) when a WhenExpression with a value-producing action (string literal, variable, function call) appears as a statement in an exe block â€” it's likely a mistake.

3. **Cheat sheet**: The if/when cheat sheet in error messages could note:
   ```
   Inside exe blocks:
     when @cond => [=> @val]   returns @val from the exe
     when @cond => "val"       value may be discarded (use block form)
   ```

## Acceptance

- howto atoms clarify when-in-exe return semantics
- Error messages guide users to the block form for returns

