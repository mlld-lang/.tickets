---
id: m-c065
status: open
deps: []
created: 2026-02-02T22:12:29Z
type: task
priority: 2
assignee: Adam
---
# Add common LLM pitfalls to mlld intro docs

## Issue

LLMs (and humans) consistently hit the same friction points when learning mlld. These should be prominently documented.

## Key Points to Add

### 1. when vs if

`when` = pattern matching expression (returns a value)
`if` = imperative control flow (executes actions)

```mlld
>> Use when for values
var @grade = when [@score >= 90 => "A"; * => "F"]

>> Use if for actions
if @isProd [
  show "Production mode"
]
```

If you try to use `when [...]` with action blocks at top level, use `if` instead.
Inside exe blocks/loops, `when [...]` with actions works because it's an expression context.

### 2. sh {} does NOT interpolate mlld variables

`sh {}` passes literal content to bash. Variables are NOT interpolated.

```mlld
>> WRONG - @path won't be replaced
var @path = "/tmp/file.txt"
sh { cat @path }

>> RIGHT - use shell variable injection
var @path = "/tmp/file.txt"
sh { cat "$path" }
```

For full interpolation, use `cmd {}` or template literals passed to sh.

## Where to Add

- docs/llm/llms-overview.txt or llms-mistakes.txt
- CLAUDE.md skill intro
- Quick start guide

## Impact

These two issues account for significant LLM debugging time. Clear upfront documentation would prevent most of it.

