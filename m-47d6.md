---
id: m-47d6
status: closed
deps: []
links: []
created: 2026-02-23T07:55:34Z
type: bug
priority: 2
assignee: Adam
updated: 2026-02-23T08:02:26Z
---
# AST selector results should use .mx metadata pattern

AST selector results (from `<file.ts { pattern }>`) return objects with top-level `.name`, `.code`, `.type`, `.line` fields. They should also populate `.mx` metadata to be consistent with how all other mlld values expose metadata.

**Current:**
```mlld
var @handlers = <api.ts { handle* }>
show @handlers[0].name    >> works (top-level)
show @handlers[0].mx.name >> empty
show @handlers[0].file    >> empty (no source file tracking on glob results)
```

**Expected:**
```mlld
show @handlers[0].name       >> works (keep for convenience)
show @handlers[0].mx.name    >> also works
show @handlers[0].mx.relative >> source file relative path
show @handlers[0].mx.type    >> "function", "class", etc.
show @handlers[0].mx.line    >> line number
```

When using glob patterns (`<src/**/*.ts { handle* }>`), each result should also carry the source file path so you can reference it in output like `@h.mx.relative` or `@h.file`.

**Impact:** Website examples use `@h.name in @h.file` (ast-selectors.mld) which doesn't work with current output. Blocks combining AST selectors with parallel fanout for a clean review-all-handlers example.

## Acceptance Criteria

- AST selector results populate .mx.name, .mx.type, .mx.line
- Glob AST selectors populate .mx.relative with source file path
- Existing .name, .code, .type, .line top-level fields still work
- for @h in @handlers => show "\@h.mx.name in \@h.mx.relative" works

