---
id: m-8400
status: closed
deps: []
created: 2026-01-31T12:53:05Z
type: feature
priority: 1
assignee: Adam
updated: 2026-02-13T15:52:12Z
---
# Add bail/exit directive for early script termination

No way to exit a script early at module level. Inside loops use `done`, but at module level there's no equivalent.

## Syntax

`bail "message"` â€” terminates the script with a non-zero exit code (1) and prints the message to stderr.

Supports any expression: `bail @errorMsg`, `` bail `prereq @name missing` ``. Bare `bail` with no argument exits with a generic message.

## Semantics

- bail terminates the **entire program**, not just the current module. If an imported module bails, the whole script dies.
- bail inside a for loop kills the script (use `done` to exit just the loop).
- bail inside if/when blocks is the primary use case: `if not @exists(@configPath) [ bail "config not found" ]`
- Exit code is always 1. Specific exit codes are out of scope.

## Acceptance Criteria

1. `bail "message"` prints message to stderr and exits with code 1
2. `bail @expr` evaluates the expression and uses result as message
3. Bare `bail` exits with a default message
4. Works inside if/when/for blocks
5. Terminates the entire program even when called from an imported module
6. Grammar supports bail in both strict and markdown modes
