---
id: m-0b04
status: closed
deps: [m-36c3, m-219f]
created: 2026-02-25T15:37:09Z
type: feature
priority: 2
updated: 2026-02-25T19:31:45Z
---
# Create @mlld/claude-stream registry module

## Goal

Create a new registry module `@mlld/claude-stream` that is a drop-in replacement for `@mlld/claude` but defaults to streaming with the claude-code adapter.

## What to build

1. Look at the existing `@mlld/claude` module in the registry. Copy its structure.
2. For every exported exe, change the definition to:
   - Add the `stream` keyword before the executor
   - Add `--output-format stream-json --verbose --include-partial-messages` to the claude command
   - Add `with { streamFormat: "claude-code" }` to the exe definition
3. Export the same names so it's a drop-in replacement.
4. Publish to the registry.

## Usage

```mlld
>> Before
import { @chat } from @mlld/claude

>> After â€” same API, now streams
import { @chat } from @mlld/claude-stream
```

## Dependencies

This depends on m-36c3 and m-219f being fixed first. Without those fixes, streamFormat and stream in exe definitions don't propagate, so this module won't work as intended.

## Acceptance Criteria

- Module exists in the registry as `@mlld/claude-stream`
- Every exe exported by `@mlld/claude` has a streaming equivalent in `@mlld/claude-stream`
- `import { @chat } from @mlld/claude-stream` followed by `show @chat("Hello")` streams parsed text

**2026-02-25 19:31 UTC:** Added @mlld/claude-stream module as a drop-in streaming replacement (modules repo commit 279731f).
