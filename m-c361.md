---
id: m-c361
status: closed
deps: []
created: 2026-02-25T21:22:27Z
type: task
priority: p1
assignee: Adam Avenir
updated: 2026-02-25T22:01:05Z
---
# feat/pipeline-retry/leading-effect-freshness fails: globalThis counter reaches 6 but only 3 show calls happen. @source() is called twice per retry â€” once silently for the effect evaluation and once for the pipeline stage. Expected iterations 1,2,3 but gets 4,5,6. Root is in execution-loop-runner.ts / single-stage-runner.ts preEffects handling.


**2026-02-25 22:00 UTC:** Root cause: stale duplicate fixture file (pipeline-retry-leading-effect-freshness.generated-fixture.json) caused the test to run twice in the same process, with globalThis.__counter persisting across runs. The second run started at counter=4 instead of 1. Fix: removed the stale fixture and added stale fixture file cleanup to build-fixtures.mjs to prevent recurrence.
