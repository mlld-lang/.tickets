---
id: m-8266
status: open
deps: []
created: 2026-02-06T02:20:47Z
type: j2bd-security,urgency-high,doc-polish
priority: 2
assignee: Adam
---
# Polish MCP security atoms and demo (PG-1 through PG-8)

j2bd-security


**2026-02-06 02:20 UTC:** 8 polish gaps from excellence assessment, all small effort:

PG-1: mcp-security atom examples use npx @anthropic/echo-server which triggers validator warning. Replace with node tests/support/mcp/fake-server.cjs (matching what the demo uses).

PG-2: env-config atom example 2 references undefined @cfg. Add var @cfg definition before env block.

PG-3: Cross-references dont connect the four MCP atoms. Add: mcp-security -> mcp-policy, mcp-guards. mcp-guards -> mcp-policy. env-config -> mcp-security.

PG-4: Demo Scenario 1 claims to show taint but never displays it. Add show @echoResult.mx.taint | @json after MCP calls in Step 2.

PG-5: Demo Scenario 3 avoids actually triggering policy denial. Should demonstrate the policy blocking something end-to-end using denied handler pattern.

PG-6: mcp-policy atom doesnt mention that policy denials are hard errors. Add note: Policy denials are hard errors - they cannot be handled with denied handler. Use guards for graceful fallback.

PG-7: Key quoting inconsistency between atoms and demo. Standardize: unquoted keys for simple identifiers, quoted only for keys with special chars like src:mcp.

PG-8: Profile fallback behavior undocumented. Add note to env-config about default profile selection when no profile is specified.
