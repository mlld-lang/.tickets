---
id: m-f554
status: open
deps: []
links: []
created: 2026-02-06T20:35:37Z
type: task
priority: 0
assignee: Adam Avenir
---
# Config: resolverPrefixes (top-level array) silently ignored — should be resolvers.prefixes

When mlld-config.json uses a top-level `resolverPrefixes` array instead of the nested `resolvers.prefixes` structure, the prefix config is silently ignored at runtime. The import then falls through to registry resolution, treating the prefix name as an author — producing a confusing error like:

  Module 'claude-poll' not found in local's registry

Two issues:

1. **Silent ignore**: `ConfigFile.getResolverPrefixes()` reads `this.data.resolvers?.prefixes`, so a top-level `resolverPrefixes` key is never seen. There should be either validation/warning for unknown top-level keys, or support for both shapes.

2. **Confusing error**: When a prefix like `@local/` isn't configured, the fallback treats `local` as a registry author name. The error message 'not found in local\'s registry' doesn't hint at the actual problem (misconfigured prefix). Should suggest checking `mlld-config.json` resolver prefixes.

Repro config that fails silently:
```json
{
  "resolverPrefixes": [
    { "prefix": "@local/", "resolver": "LOCAL", "config": { "basePath": "./llm/modules" } }
  ]
}
```

Working config:
```json
{
  "resolvers": {
    "prefixes": [
      { "prefix": "@local/", "resolver": "LOCAL", "config": { "basePath": "./llm/modules" } }
    ]
  }
}
```

Found in inj-defense project.

