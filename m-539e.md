---
id: m-539e
status: closed
deps: []
created: 2026-01-30T11:44:16Z
type: bug
priority: 1
assignee: Adam
tags: [interpreter, field-access]
updated: 2026-01-31T07:18:07Z
---
# .length on loaded JSON arrays returns string length instead of array length

When loading a JSON array from a file, `.length` returns the string length of the JSON content instead of the array element count.

## Reproduction

```mlld
var @groups = </path/to/file.json>?   >> file contains: [{"a":1},{"b":2},{"c":3}]
show `length = @groups.length`        >> outputs: 26 (string length of JSON)
show `first = @groups[0].a`           >> outputs: 1 (correct)
```

Array indexing works, iteration works, but `.length` treats the array as a string.

## Expected

`@groups.length` should return `3` for a 3-element array.


**2026-01-30 15:17 UTC:** Enrich reviewed: 2026-01-30T15:14:56.295Z

**2026-01-31 07:18 UTC:** Fixed by prioritizing array length over metadata string length in field-access.ts. When accessing .length on a StructuredValue that wraps an array (like JSON loaded from a file), we now return the array element count instead of falling through to the mx.length property (which contained the string length of the content).

Changes:
- interpreter/utils/field-access.ts: Added early check in structuredWrapper handling for .length on arrays
- tests/cases/feat/field-access/array-length-from-json/: Added test case
