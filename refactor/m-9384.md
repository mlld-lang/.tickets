---
id: m-9384
status: closed
deps: [m-5413]
created: 2026-02-12T03:22:29Z
type: task
priority: 1
assignee: Adam
updated: 2026-02-12T05:21:10Z
---
# Consolidation Program: Phase 2 inline trivial core handlers while preserving registry contract

Inline trivial interpreter handler wrappers into evaluator flow, while preserving the dispatch registry test contract and any externally asserted exports.

## Acceptance Criteria

- Inline only wrappers that are pure pass-through orchestration.
- Preserve `handler-registry` contract required by tests (or provide equivalent compatibility shim).
- Before committing this phase, run `npm test` and `npm run build`; both must pass.


**2026-02-12 05:21 UTC:** --dir=refactor Phase 2 implementation complete: inlined pure pass-through handler wrappers directly in interpreter/core/interpreter/evaluator.ts while preserving dispatch/registry contracts.

Scope inlined (trivial wrappers only): execInvocation, variableReferenceWithTail, newExpression, labelModification, unifiedExpression, whenExpression, exeBlock, foreach, forExpression, loopExpression, loadContent, code.

Compatibility/contract safeguards:
- handler-registry mapping contract left unchanged in interpreter/core/interpreter/handlers/handler-registry.ts.
- Existing handler modules remain present as compatibility shims; evaluator dispatch path is inlined.

Verification evidence:
- Focused parity tests: PASS
  - npx vitest run interpreter/core/interpreter/handlers/specialized-handlers.test.ts interpreter/core/interpreter/dispatch.test.ts interpreter/core/interpreter.characterization.test.ts interpreter/eval/show.characterization.test.ts
- npm test: PASS (Test Files: 360 passed, 7 skipped; Tests: 3935 passed, 63 skipped)
- npm run build: PASS
