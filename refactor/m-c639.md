---
id: m-c639
status: open
deps: [m-2042]
created: 2026-02-09T06:36:42Z
type: task
priority: 1
assignee: Adam Avenir
parent: m-15ea
tags: [refactor, pipeline-executor, phase-6]
updated: 2026-02-09T06:36:43Z
---
# Refactor Program: Modularize interpreter/eval/pipeline/executor.ts - Phase 6: Extract parallel-stage orchestration

Objective:
Isolate parallel-stage execution and aggregation into a dedicated orchestrator.

Instructions for the implementing agent:
- Extract `executeParallelStage` and parallel-error context handling into a focused module.
- Preserve ordered branch outputs, concurrency cap/rate pacing, and aggregated output shape.
- Preserve current behavior for retry signals in parallel branches (unsupported path handling) and error-marker generation.
- Add tests for branch ordering, error aggregation, and label/descriptor merge behavior across branches.

## Acceptance Criteria

1. Parallel-stage orchestration and error aggregation live in dedicated module(s).
2. Parallel semantics and output contracts match baseline behavior.
3. Exit criteria: all tests pass with output attached:
   npm run build && npm test && npm run test:tokens && npm run test:examples
