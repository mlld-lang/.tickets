---
id: m-e217
status: open
deps: [m-a092]
created: 2026-02-09T06:36:42Z
type: task
priority: 1
assignee: Adam Avenir
parent: m-15ea
tags: [refactor, pipeline-executor, phase-4]
updated: 2026-02-09T06:36:42Z
---
# Refactor Program: Modularize interpreter/eval/pipeline/executor.ts - Phase 4: Extract inline and while stage executors

Objective:
Extract inline-stage and while-stage adapters into specialized executors.

Instructions for the implementing agent:
- Isolate inline command stage execution (interpolation, policy checks, label-flow enforcement, command execution context wiring).
- Isolate inline value stage execution and while-stage processor command adaptation.
- Keep working-directory resolution and security enforcement semantics unchanged.
- Add focused tests for inline command deny/allow behavior, inline value descriptor propagation, and while-processor adaptation.

## Acceptance Criteria

1. Inline-command, inline-value, and while-adapter logic are implemented in dedicated module(s).
2. Policy/label-flow and descriptor behavior match baseline coverage.
3. Exit criteria: all tests pass with output attached:
   npm run build && npm test && npm run test:tokens && npm run test:examples
