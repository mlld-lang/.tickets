---
id: m-61c3
status: open
deps: [m-e21c]
created: 2026-02-09T07:04:59Z
type: task
priority: 1
assignee: Adam Avenir
parent: m-a97c
tags: [refactor, variable-importer, phase-3]
updated: 2026-02-09T07:04:59Z
---
# Refactor Program: Modularize interpreter/eval/import/VariableImporter.ts - Phase 3: Extract import type routing orchestration



Objective:
Separate import subtype routing from variable construction internals.

Instructions for the implementing agent:
- In scope: import subtype routing orchestration extraction only.
- Out of scope: variable creation strategies and executable rehydration extraction.
- Extract `handleImportType` and top-level subtype routing logic into an import routing module.
- Preserve subtype behavior for policy, namespace, and selected imports.
- Add tests for subtype dispatch and guard registration wiring at import boundaries.

Module boundaries:
- Import routing module owns subtype dispatch and handoff to subtype handlers.
- Routing module does not implement variable construction details.
- Policy and guard registration calls remain explicit routing side effects.

Preserve behavior checks:
- Policy/namespace/selected subtype dispatch behavior remains unchanged.
- Guard registration wiring at import boundaries remains unchanged.
- Routing error semantics remain unchanged.

## Acceptance Criteria

1. Import subtype routing logic is extracted into a dedicated module.
2. Subtype behavior and guard registration wiring remain baseline-compatible.
3. Tests cover dispatch parity across policy, namespace, and selected imports.
4. Exit criteria: test gate command succeeds and output is attached:
   npm run build && npm test && npm run test:tokens && npm run test:examples
