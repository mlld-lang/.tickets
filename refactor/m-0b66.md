---
id: m-0b66
status: open
deps: [m-61c3]
created: 2026-02-09T07:04:59Z
type: task
priority: 1
assignee: Adam Avenir
parent: m-a97c
tags: [refactor, variable-importer, phase-4]
updated: 2026-02-09T07:04:59Z
---
# Refactor Program: Modularize interpreter/eval/import/VariableImporter.ts - Phase 4: Extract variable factory strategies



Objective:
Modularize `createVariableFromValue` pathways.

Instructions for the implementing agent:
- In scope: variable factory strategy extraction for all supported value families.
- Out of scope: import routing orchestration and namespace/policy assignment handlers.
- Extract variable creation strategies for structured values, executables, templates, object/array imports, and primitive fallbacks.
- Preserve metadata/security propagation and type inference behavior.
- Add tests for each strategy branch with metadata and descriptor assertions.

Module boundaries:
- Factory strategy modules own value-family-specific construction.
- Factory orchestrator routes values to strategies through explicit interfaces.
- Routing module calls into factory orchestrator only.

Preserve behavior checks:
- Strategy routing decisions remain unchanged.
- Metadata/security propagation remains unchanged.
- Type inference and wrapper construction semantics remain unchanged.

## Acceptance Criteria

1. Variable factory pathways are extracted into strategy modules.
2. Routing and propagation behavior remain baseline-compatible.
3. Tests cover each strategy branch with metadata/descriptor assertions.
4. Exit criteria: test gate command succeeds and output is attached:
   npm run build && npm test && npm run test:tokens && npm run test:examples
