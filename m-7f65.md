---
id: m-7f65
status: closed
deps: []
created: 2026-02-22T17:20:33Z
type: bug
priority: 0
assignee: Adam Avenir
tags: [builtins, interpreter]
updated: 2026-02-22T18:48:46Z
---
# @typeof() should return simple type names; add @typeInfo() for provenance

## Current behavior

`@typeof(@num)` returns `"primitive (number) [from /var]"` â€” a provenance string. This means `@typeof(@x) == "number"` always fails silently.

## Required changes

1. **Change `@typeof()`** to return simple type name strings: `"number"`, `"string"`, `"array"`, `"object"`, `"boolean"`, `"null"`, `"executable"`. This makes `@typeof(@x) == "number"` work as expected.
2. **Add `@typeInfo()` builtin** that returns the current rich provenance string (`"primitive (number) [from /var]"`) for debugging and tracing use cases.

The implementation is in `interpreter/eval/exec-invocation.ts` (the `typeof`/`TYPEOF` special case handler) and `interpreter/builtin/transformers.ts` (the `typeof` transformer). Both need updating. Register `typeInfo`/`TYPEINFO` as a new builtin using the same pattern.

