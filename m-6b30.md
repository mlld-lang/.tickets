---
id: m-6b30
status: closed
deps: []
links: []
created: 2026-01-25T21:14:27Z
type: bug
priority: 1
assignee: Adam Avenir
tags: [grammar, templates, when, size-m, complexity-l, risk-l, impl-none]
updated: 2026-01-31T07:37:02Z
---
# Unclosed < in template breaks subsequent when block parsing

An unclosed `<` character inside a backtick template causes subsequent `when` blocks to fail parsing with 'Text content not allowed in strict mode'.

## Reproduction

```mlld
show \`<\`
when @x > 0 [
  show \`\`
]
```

Fails with: `Text content not allowed in strict mode` at the `show \`\`` inside the when block.

## Works

```mlld
show \`<>\`   >> closed angle brackets - works
when @x > 0 [
  show \`\`
]
```

## Root cause

The parser appears to treat unclosed `<` as beginning a file reference that spans into subsequent lines, causing the when block body to be misinterpreted.

## Workaround

Use `less than` symbol with closing bracket or escape sequence. For display like `(<=0.3)`, can rewrite as `(0.3 or less)` or similar.

