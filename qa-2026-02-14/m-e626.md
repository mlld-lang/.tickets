---
id: m-e626
status: closed
deps: []
created: 2026-02-15T15:48:57Z
type: task
priority: 2
assignee: Adam
tags: [qa-2026-02-14, p2, reconcile, escaping]
updated: 2026-02-15T16:46:09Z
---
# Reconcile: @@ escape scope - verify universal vs template-only

Agent documented @@ as 'template interpolation contexts only'. Review agent says grammar shows @@ in EscapeSequence used universally. QA found @@ broken in some contexts.

Reconcile:
1. Test @@ in: templates, command strings, paths, regular strings
2. Test \@ in same contexts
3. Document actual scope differences (if any)

Review agent says both work universally. QA initially flagged @@ as broken then corrected after AST analysis.

## Acceptance Criteria

@@ and \@ scope differences verified and documented accurately

## Resolution

Review agent was correct: both `@@` and `\@` work universally in all string and template contexts. The original documentation claiming `@@` is template-only was wrong.

Tested both `@@` and `\@` in all contexts via AST parsing and runtime execution:

| Context | `@@` | `\@` |
|---------|------|------|
| Backtick strings | literal @ | literal @ |
| Double-quoted strings | literal @ | literal @ |
| Single-quoted strings | literal @ | literal @ |
| Double-colon templates | literal @ | literal @ |
| Triple-colon templates | literal @ | literal @ |
| Double-bracket templates | literal @ | literal @ |
| .att template files | literal @ | literal @ |
| cmd {} blocks (quoted) | not processed (passthrough) | not processed (passthrough) |
| cmd {} blocks (unquoted) | parse error (@triggers var) | shell-processed |

The grammar's `EscapeSequence` rule in `segments.peggy` handles both escapes universally and is referenced by all text segment types. The only exception is `cmd {}` blocks where content is passed to the shell verbatim with only @var interpolation.

Updated `docs/src/atoms/syntax/escaping-at.md` to remove the incorrect "template-only" claim and document the universal scope with the cmd {} exception. Existing fixture tests (`feat/escape-at-sign`, `feat/escape-at-in-xml`) continue to pass.

