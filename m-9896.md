---
id: m-9896
status: closed
deps: []
created: 2026-02-25T06:21:42Z
type: bug
priority: 0
assignee: Adam Avenir
updated: 2026-02-25T17:42:14Z
---
# Namespace exported function collision with built-in string methods

## Bug

When a namespace exports a function whose name matches a built-in string method, calling it via `@ns.name(@arg)` resolves to the built-in string method instead of the exported function.

## Reproduction

Create utils.mld:
```mlld
exe @trim(input) = js { return input.replace(/^>>>/, '') }
export { @trim }
```

Create main.mld:
```mlld
import "utils.mld" as @ns
var @result = @ns.trim(">>>hello")
show @result
```

Expected output: `hello`
Actual behavior: `@ns.trim` resolves as JavaScript's String.prototype.trim() â€” the argument is ignored, and only whitespace is stripped.

## Acceptance criteria

1. `@ns.trim(@arg)` where @ns is a namespace with an exported @trim function must call the exported function, NOT String.prototype.trim
2. `@myString.trim()` where @myString is a plain string value must still call String.prototype.trim (no regression on actual strings)
3. This must work for ALL colliding names: trim, split, slice, replace, replaceAll, includes, indexOf, startsWith, endsWith, toLowerCase, toUpperCase, match, padStart, padEnd, repeat, concat, substring
4. All existing tests pass: `npm test`

## Where to look

The property/method resolution code in the evaluator (likely in field access or method call evaluation). There is a resolution order that checks built-in string methods. When the receiver is a namespace object (i.e., it has exports), the resolution must check exported names FIRST, before checking built-in methods.
